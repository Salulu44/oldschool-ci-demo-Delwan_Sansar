name: Delwan_Pipeline
on: [push]
jobs:
  build_and_test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
      - name: Build Docker image
        run: docker build -t oldschool-demo-image_delwan .
      - name: Test Docker image direkt
        run: |
          # Container persistent starten
          docker run -d --name delwan-test oldschool-demo-image_delwan
          sleep 3  # App starten lassen
          
          # Logs anzeigen
          echo "=== CONTAINER LOGS ==="
          docker logs delwan-test
          
          # Test
          output=$(docker logs delwan-test)
          if [[ "$output" != *"OldSchool GmbH"* ]]; then
            echo "Test fehlgeschlagen!"
            exit 1
          fi


